---
path: warp-servo/master
status: dormant
progress: 0
last_touched: 2025-12-20
touched_by: claude-opus-4
blocking: []
enables: [warp-servo/phase0-research, warp-servo/phase1-core-primitives, warp-servo/phase2-servo-integration, warp-servo/phase3-jewel-refinement]
session_notes: |
  Master index for WARP + Servo integration project.
  Constitutional alignment verified. N-Phase skeleton complete.
phase_ledger:
  PLAN: complete
  REFLECT: pending
---

# WARP + Servo Integration: Master Plan

> *"Servo supplies the surface; Rust supplies the laws."*
> *"The persona is a garden, not a museum."* — Kent's standing intent

---

## Executive Summary

This master plan coordinates the integration of WARP-inspired primitives with Servo browser engine to transform kgents into a **trace-first, law-enforced, visually alive** agent platform.

**Transformative Claims**:
1. Every action becomes a TraceNode (auditable, replayable)
2. Every session becomes a Walk (anchored to Forest plans)
3. Every workflow becomes a Ritual (lawful, gated)
4. Servo becomes the projection substrate (not just a browser)
5. Crown Jewels move from B to A grade (alive, teaching-dense)

---

## Constitutional Alignment (Verified)

| Principle | Alignment | Evidence |
|-----------|-----------|----------|
| **Tasteful** | ✅ | Curated 9 primitives, not sprawl |
| **Curated** | ✅ | WARP behaviors adapted, not copied |
| **Ethical** | ✅ | Covenant gates, visible consent |
| **Joy-Inducing** | ✅ | Breathing surfaces, organic motion |
| **Composable** | ✅ | Category laws enforced, single outputs |
| **Heterarchical** | ✅ | Multi-webview, no fixed boss |
| **Generative** | ✅ | Spec-first, SpecGraph-backed |

---

## Phase Overview

```
┌─────────────────────────────────────────────────────────────────────┐
│                    WARP + SERVO INTEGRATION                         │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  Phase 0: Research & Foundation                                     │
│  ├── Servo embedding viability                                      │
│  ├── Rust core strategy                                             │
│  ├── WARP behavior audit                                            │
│  └── Existing system leverage                                       │
│                     │                                               │
│                     ▼                                               │
│  Phase 1: Core Primitives                                           │
│  ├── TraceNode (atom)                                               │
│  ├── Walk (session)                                                 │
│  ├── Offering (context)                                             │
│  ├── Covenant (permissions)                                         │
│  ├── Ritual (workflow)                                              │
│  ├── IntentTree (tasks)                                             │
│  ├── VoiceGate (Anti-Sausage)                                       │
│  └── Terrace (knowledge)                                            │
│                     │                                               │
│                     ▼                                               │
│  Phase 2: Servo Integration                                         │
│  ├── Servo projection target                                        │
│  ├── ServoScene primitives                                          │
│  ├── TerrariumView multi-webview                                    │
│  ├── TraceNode playback UI                                          │
│  ├── Intent-based navigation                                        │
│  └── ServoShell host                                                │
│                     │                                               │
│                     ▼                                               │
│  Phase 3: Crown Jewel Refinement                                    │
│  ├── Breathing surface system                                       │
│  ├── Teaching overlay density                                       │
│  ├── Per-jewel visual contracts                                     │
│  ├── Rust core enforcement                                          │
│  └── Education & skills                                             │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## Total Estimates

| Phase | Hours | Tests | Chunks |
|-------|-------|-------|--------|
| Phase 0 | 9-12 | 0 | 5 |
| Phase 1 | 19-26 | 90+ | 8 |
| Phase 2 | 21-27 | 50+ | 7 |
| Phase 3 | 27-34 | 55+ | 9 |
| **Total** | **76-99** | **195+** | **29** |

**Timeline Estimate**: 4-6 weeks with focused sessions.

---

## Dependency Graph

```
Phase 0 ─────┬───────────────────────────────────┐
             │                                   │
             ▼                                   │
       Phase 1 ──────────────────────────────────┼──────┐
             │                                   │      │
             ▼                                   ▼      │
       Phase 2 ◄────────────────────────────────────────┤
             │                                          │
             ▼                                          │
       Phase 3 ◄────────────────────────────────────────┘
```

**Critical Path**: Phase 0 research decisions gate all subsequent phases.

---

## Key Deliverables

### Specifications

| Spec | Status | Path |
|------|--------|------|
| WARP Primitives Protocol | ✅ Created | `spec/protocols/warp-primitives.md` |
| Servo Substrate Protocol | ✅ Created | `spec/protocols/servo-substrate.md` |

### Plans

| Plan | Status | Path |
|------|--------|------|
| Phase 0: Research | ✅ Created | `plans/warp-servo-phase0-research.md` |
| Phase 1: Primitives | ✅ Created | `plans/warp-servo-phase1-core-primitives.md` |
| Phase 2: Servo | ✅ Created | `plans/warp-servo-phase2-servo-integration.md` |
| Phase 3: Refinement | ✅ Created | `plans/warp-servo-phase3-jewel-refinement.md` |
| Master (this) | ✅ Created | `plans/warp-servo-master.md` |

### AGENTESE Nodes (To Be Implemented)

| Path | Primitive | Phase |
|------|-----------|-------|
| `time.trace.node.*` | TraceNode | 1 |
| `time.walk.*` | Walk | 1 |
| `self.ritual.*` | Ritual | 1 |
| `concept.offering.*` | Offering | 1 |
| `concept.intent.*` | IntentTree | 1 |
| `self.covenant.*` | Covenant | 1 |
| `brain.terrace.*` | Terrace | 1 |
| `self.voice.gate.*` | VoiceGate | 1 |
| `world.terrarium.view.*` | TerrariumView | 2 |

---

## Priority Ranking (P0-P7)

From brainstorming document:

| Priority | Iteration | Phase |
|----------|-----------|-------|
| P0 | Servo shell + webapp deprecation | 2 |
| P1 | Servo primitives → Crown Jewel contracts | 3 |
| P2 | Servo projection target + TraceNode playback | 2 |
| P3 | Rust TraceNode ledger + Witness integration | 3 |
| P4 | Rust Covenant/Offering enforcement | 3 |
| P5 | Rust PolyAgent + Operad kernel | 3 |
| P6 | TerrariumView multi-webview | 2 |
| P7 | Town/Sheaf WebGPU | Future |

---

## Decision Gates

### Gate 1: Servo Viability (Phase 0)

**Question**: Is Servo embedding mature enough for production use in 2025?

**Outcomes**:
- **Go**: Proceed with Servo as primary substrate
- **Partial**: Use Tauri + webview with Servo-like abstractions
- **No-Go**: Enhance React webapp with WARP primitives only

### Gate 2: Rust Core (Phase 0)

**Question**: Should categorical kernel be Rust-native?

**Outcomes**:
- **Full Rust**: PyO3 bindings for PolyAgent, Operad, Sheaf
- **Hybrid**: Rust for performance-critical paths only
- **Python-first**: Keep Python, add Rust later

---

## Anti-Sausage Protocol (Project-Level)

Before each phase completion:

1. **Voice Check**: Does output sound like Kent on his best day?
2. **Daring Check**: Is this bold, or did we play it safe?
3. **Categorical Check**: Do category laws hold?
4. **Joy Check**: Would interaction feel alive?

**Voice Anchors** (quote directly when relevant):
- *"Daring, bold, creative, opinionated but not gaudy"*
- *"The Mirror Test"*
- *"Tasteful > feature-complete"*
- *"The persona is a garden, not a museum"*
- *"Depth over breadth"*

---

## Success Metrics

| Metric | Target | Measurement |
|--------|--------|-------------|
| TraceNode coverage | 100% | Every AGENTESE invocation emits TraceNode |
| Walk binding | 100% | Every CLI session creates Walk |
| Covenant gating | 100% | Sensitive ops require explicit permission |
| VoiceGate hits | <5% | Few prompts rejected for sausage |
| Teaching mode density | High | Users report learning system mechanics |
| Jewel aliveness | A-grade | User feedback: "feels alive" |

---

## Cross-References

### Brainstorming

- `brainstorming/2025-12-20-servo-browser-engine-integration.md`
- `brainstorming/warp-primitives-for-kgents.md`

### Skills

- `docs/skills/metaphysical-fullstack.md`
- `docs/skills/crown-jewel-patterns.md`
- `docs/skills/projection-target.md`
- `docs/skills/agentese-node-registration.md`

### Principles

- `spec/principles/CONSTITUTION.md`
- `plans/_focus.md`

---

## N-Phase Lifecycle

This project follows the 11-phase N-Phase cycle:

1. **PLAN** ✅ (this document)
2. **RESEARCH** (Phase 0)
3. **DEVELOP** (Phase 1-2)
4. **STRATEGIZE** (Phase 1-2)
5. **CROSS-SYNERGIZE** (Phase 3)
6. **IMPLEMENT** (Phase 1-3)
7. **QA** (continuous)
8. **TEST** (continuous)
9. **EDUCATE** (Phase 3)
10. **MEASURE** (post-implementation)
11. **REFLECT** (project completion)

---

*"Make Servo + Rust foundational across ALL of kgents, not just UI."*
*— Project Vision*
