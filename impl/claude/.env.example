# kgents Local Development Environment
# Copy this file to .env and fill in your values
#
# IMPORTANT: Never commit .env files to git!
#
# Quick Start:
#   1. cp .env.example .env
#   2. docker compose up -d  (starts Postgres)
#   3. source .env
#   4. kg brain status  (should show PostgreSQL)
#
# For full docs: spec/protocols/storage-migration.md

# =============================================================================
# DATABASE CONFIGURATION (CRITICAL)
# =============================================================================
#
# WARNING: Without KGENTS_DATABASE_URL, data is stored in SQLite and may
# disappear on restart if the file location changes. For persistent data,
# ALWAYS set this variable.

# PostgreSQL connection URL (RECOMMENDED for persistence)
# Format: postgresql+asyncpg://user:pass@host:port/db
# Default Docker setup:
KGENTS_DATABASE_URL=postgresql+asyncpg://kgents:kgents@localhost:5432/kgents

# Legacy alias (DEPRECATED - use KGENTS_DATABASE_URL instead)
# Kept for backward compatibility with older scripts
KGENTS_POSTGRES_URL=postgresql://kgents:kgents@localhost:5432/kgents

# Force specific D-gent backend (auto-detected if not set)
# Options: MEMORY, JSONL, SQLITE, POSTGRES
# KGENTS_DGENT_BACKEND=POSTGRES

# Force specific V-gent backend (auto-detected if not set)
# Options: MEMORY, POSTGRES, QDRANT
# KGENTS_VGENT_BACKEND=POSTGRES

# =============================================================================
# LLM CONFIGURATION
# =============================================================================
#
# At least one LLM provider is needed for Soul/K-gent features.
# Priority: ANTHROPIC_API_KEY > OPENROUTER_API_KEY > MORPHEUS_URL

# Anthropic API key (for Claude models directly)
# Get yours at: https://console.anthropic.com/
# ANTHROPIC_API_KEY=sk-ant-...

# OpenRouter API key (for 100+ models including Claude, GPT-4, etc.)
# Get yours at: https://openrouter.ai/
# OPENROUTER_API_KEY=sk-or-...

# Morpheus Gateway URL (internal LLM routing)
# Used in production K8s deployments
# MORPHEUS_URL=http://morpheus-gateway:8080/v1
# LLM_ENDPOINT=http://localhost:30808/v1  # Alternative legacy name

# Morpheus configuration
# MORPHEUS_API_KEY=morpheus-internal
# MORPHEUS_DEFAULT_MODEL=claude-sonnet-4-20250514
# MORPHEUS_TIMEOUT=120

# Disable auto-LLM creation in tests
# KGENTS_NO_AUTO_LLM=1

# =============================================================================
# CORS CONFIGURATION (Web Development)
# =============================================================================

# Allowed origins (comma-separated)
# Default: http://localhost:3000
# Example: https://yourdomain.com,https://app.yourdomain.com
# CORS_ORIGINS=http://localhost:3000

# Enable permissive CORS for local development (disables credentials)
# Set to 1/true/yes to allow all origins
# CORS_ALLOW_ALL=1

# =============================================================================
# STORAGE PATHS (XDG Compliance)
# =============================================================================
#
# kgents respects XDG Base Directory Specification.
# Default locations are ~/.local/share/kgents, ~/.config/kgents, ~/.cache/kgents

# Override data directory (crystals, marks, etc.)
# XDG_DATA_HOME=~/.local/share
# KGENTS_DATA_ROOT=~/.local/share/kgents

# Override config directory
# XDG_CONFIG_HOME=~/.config
# KGENTS_CONFIG_ROOT=~/.config/kgents

# Override cache directory
# XDG_CACHE_HOME=~/.cache
# KGENTS_CACHE_ROOT=~/.cache/kgents

# SQLite fallback path (used when PostgreSQL unavailable)
# KGENTS_SQLITE_PATH=~/.local/share/kgents/membrane.db

# =============================================================================
# DEVELOPMENT SERVER
# =============================================================================

# Backend server port (default: 8000)
# KGENTS_DEV_BACKEND_PORT=8000

# Frontend server port (default: 3000)
# KGENTS_DEV_FRONTEND_PORT=3000

# Enable debug mode with auto-reload
# DEBUG=true

# =============================================================================
# ENVIRONMENT & LOGGING
# =============================================================================

# Environment: development, staging, production, test
KGENTS_ENVIRONMENT=development

# Log level: DEBUG, INFO, WARNING, ERROR
KGENTS_LOG_LEVEL=INFO

# Service identification (for telemetry)
# KGENTS_SERVICE_NAME=kgents
# KGENTS_SERVICE_VERSION=0.1.0

# =============================================================================
# VECTOR DATABASE (Semantic Search)
# =============================================================================

# Qdrant URL for vector similarity search
# KGENTS_QDRANT_URL=http://localhost:6333
# QDRANT_URL=http://localhost:6333  # Legacy name

# Embedding configuration
# EMBEDDING_PROVIDER=mock  # Options: mock, openai, local
# EMBEDDING_MODEL=text-embedding-ada-002
# EMBEDDING_DIMENSION=1536

# Pattern store collection name
# PATTERN_COLLECTION=kgent_patterns

# =============================================================================
# REDIS (Caching & State)
# =============================================================================

# Redis URL for caching, rate limiting, and distributed state
# REDIS_URL=redis://localhost:6379

# Soul cache key prefix
# SOUL_CACHE_PREFIX=kgent:soul:

# =============================================================================
# NATS (Event Streaming)
# =============================================================================

# NATS server URLs (comma-separated)
# NATS_SERVERS=nats://localhost:4222

# Enable NATS event streaming
# NATS_ENABLED=false

# NATS stream configuration
# NATS_STREAM_NAME=kgent-events
# NATS_MAX_RECONNECT=10

# =============================================================================
# STRIPE (Payments)
# =============================================================================
#
# Required for billing features. Test mode keys work in development.

# STRIPE_SECRET_KEY=sk_test_...
# STRIPE_PUBLISHABLE_KEY=pk_test_...
# STRIPE_WEBHOOK_SECRET=whsec_...

# Price IDs for subscription tiers
# STRIPE_PRICE_PRO_MONTHLY=price_...
# STRIPE_PRICE_PRO_YEARLY=price_...
# STRIPE_PRICE_TEAMS_MONTHLY=price_...

# Price IDs for credit packs
# STRIPE_PRICE_RESIDENT=price_resident_monthly
# STRIPE_PRICE_CITIZEN=price_citizen_monthly
# STRIPE_PRICE_FOUNDER=price_founder_monthly
# STRIPE_PRICE_STARTER=price_credits_500
# STRIPE_PRICE_EXPLORER=price_credits_2500
# STRIPE_PRICE_ADVENTURER=price_credits_10000

# =============================================================================
# OPENMETER (Usage Metering)
# =============================================================================

# OPENMETER_ENABLED=false
# OPENMETER_API_KEY=...
# OPENMETER_BASE_URL=https://openmeter.cloud
# OPENMETER_BATCH_SIZE=100
# OPENMETER_FLUSH_INTERVAL=1.0

# =============================================================================
# TELEGRAM (Notifications)
# =============================================================================

# TELEGRAM_ENABLED=false
# TELEGRAM_BOT_TOKEN=...  # From @BotFather
# TELEGRAM_CHAT_ID=...    # Target chat ID

# =============================================================================
# OPENTELEMETRY (Observability)
# =============================================================================

# Enable telemetry (auto-detected from OTEL_* vars if not set)
# KGENTS_TELEMETRY_ENABLED=false

# OTLP exporter endpoint
# OTEL_EXPORTER_OTLP_ENDPOINT=localhost:4317
# OTEL_EXPORTER_OTLP_INSECURE=true

# Jaeger agent (alternative to OTLP)
# JAEGER_AGENT_HOST=localhost
# JAEGER_AGENT_PORT=6831

# Local trace export (for debugging)
# KGENTS_TRACE_JSON_PATH=~/.local/share/kgents/traces.json
# KGENTS_TRACE_CONSOLE=false

# Sampling rate (0.0 to 1.0)
# OTEL_TRACES_SAMPLER_ARG=1.0

# Telemetry config file path
# KGENTS_TELEMETRY_CONFIG=~/.config/kgents/telemetry.yaml

# =============================================================================
# KUBERNETES (Production)
# =============================================================================

# Kubernetes namespace
# KGENTS_NAMESPACE=kgents-agents

# Kubeconfig path
# KUBECONFIG=~/.kube/config
# KGENTS_K8S_CONTEXT=...

# =============================================================================
# OPENAI (Embeddings)
# =============================================================================

# Required for OpenAI embeddings if EMBEDDING_PROVIDER=openai
# OPENAI_API_KEY=sk-...

# =============================================================================
# GITHUB (Witness Repository)
# =============================================================================

# KGENTS_GITHUB_OWNER=...
# KGENTS_GITHUB_REPO=...
# KGENTS_GITHUB_TOKEN=...

# Repository path for witness marks
# KGENTS_WITNESS_REPO=...
# KGENTS_WITNESS_WATCHERS=...  # Comma-separated paths

# =============================================================================
# DAEMON CONFIGURATION
# =============================================================================

# Gateway URL for daemon
# KGENTS_GATEWAY_URL=http://localhost:8000

# Allow running without daemon (for debugging)
# KGENTS_NO_DAEMON=1

# FD3 semantic output path
# KGENTS_FD3=/tmp/kgents-fd3

# Verbose output mode
# KGENTS_VERBOSE=false

# =============================================================================
# AGENT CONFIGURATION
# =============================================================================

# K-gent stream buffer sizes
# KGENT_STREAM_BUFFER_SIZE=64
# KGENT_WS_BUFFER_SIZE=32

# L-gent (Semantic Layer) server
# LGENT_HOST=0.0.0.0
# LGENT_PORT=8080
# LGENT_MODE=standalone
# DATABASE_URL=...  # For L-gent standalone mode

# U-gent (Umwelt) server
# UGENT_HOST=0.0.0.0
# UGENT_PORT=8080
# DGENT_URL=http://localhost:8081

# Synapse runner configuration
# SYNAPSE_COLLECTION=memories
# SYNAPSE_TEXT_FIELD=content
# SYNAPSE_BATCH_SIZE=100
# SYNAPSE_POLL_INTERVAL_MS=1000
# SYNAPSE_MAX_RETRIES=5
# SYNAPSE_USE_CIRCUIT_BREAKER=true
# SYNAPSE_USE_DLQ=true

# Town server
# HOST=0.0.0.0
# PORT=8001

# =============================================================================
# CRYSTAL STORAGE
# =============================================================================

# Use crystal storage backend
# USE_CRYSTAL_STORAGE=false

# =============================================================================
# TESTING
# =============================================================================

# Run LLM integration tests (requires API keys)
# RUN_LLM_TESTS=0

# SpecGraph CI gate skip
# SPECGRAPH_SKIP_CI_GATE=0

# =============================================================================
# REACTIVE METRICS
# =============================================================================

# Enable reactive widget metrics
# KGENTS_REACTIVE_METRICS=0

# =============================================================================
# TERMINAL CONFIGURATION
# =============================================================================

# Terminal capabilities are auto-detected from:
# TERM, COLORTERM, LANG, LC_ALL, LC_CTYPE
# Disable colors:
# NO_COLOR=1

# =============================================================================
# GALLERY (Visual Rendering)
# =============================================================================

# KGENTS_GALLERY_TARGET=...
# KGENTS_GALLERY_ENTROPY=...
# KGENTS_GALLERY_SEED=...
# KGENTS_GALLERY_TIME=...
# KGENTS_GALLERY_VERBOSE=false
# KGENTS_GALLERY_PHASE=...
# KGENTS_GALLERY_STYLE=...
# KGENTS_GALLERY_BREATHING=...
