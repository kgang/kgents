/**
 * StudioPage Styles — STARK BIOME Palette
 *
 * "90% Steel, 10% Earned Glow"
 *
 * Steel Colors:
 * - obsidian: #0A0A0C (deepest background)
 * - carbon: #141418 (panel backgrounds)
 * - slate: #1C1C22 (hover states)
 * - gunmetal: #28282F (borders)
 *
 * Life Colors (only for content):
 * - life-sage: #4A6B4A (active states)
 * - life-mint: #6B8B6B (text accents)
 *
 * Earned Glow (focus states only):
 * - glow-spore: #C4A77D (focus rings, active indicators)
 *
 * Animation:
 * - 4-7-8 breathing: 6.75s with slow exhale (NOT symmetric)
 * - Stillness by default: No animation unless triggered
 */

/* =============================================================================
 * Steel Foundation
 * ============================================================================= */

.studio-page {
  height: 100%;
  display: flex;
  flex-direction: column;
  background: #0A0A0C; /* steel-obsidian */
  color: #B4B4BE; /* body text */
  font-family: 'JetBrains Mono', 'Fira Code', 'SF Mono', monospace;
  overflow: hidden;
}

/* =============================================================================
 * Header
 * ============================================================================= */

.studio-page__header {
  flex-shrink: 0;
  padding: 10px 16px;
  background: #141418; /* steel-carbon */
  border-bottom: 1px solid #28282F; /* steel-gunmetal */
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.studio-page__title {
  font-size: 1.1rem;
  font-weight: 600;
  color: #D2D2DC;
  margin: 0;
  letter-spacing: -0.01em;
}

.studio-page__marks-badge {
  color: #6B8B6B; /* life-mint */
  font-size: 0.85rem;
  font-weight: 500;
  padding: 4px 10px;
  background: rgba(74, 107, 74, 0.1); /* life-sage with opacity */
  border-radius: 3px;
  border: 1px solid rgba(107, 139, 107, 0.2);
}

/* =============================================================================
 * Main Layout
 * ============================================================================= */

.studio-page__main {
  flex: 1;
  display: flex;
  overflow: hidden;
}

/* =============================================================================
 * Feed Sidebar (Left)
 * ============================================================================= */

.studio-page__feed {
  width: 280px;
  flex-shrink: 0;
  background: #141418; /* steel-carbon */
  border-right: 1px solid #28282F; /* steel-gunmetal */
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transition: width 200ms cubic-bezier(0.19, 1, 0.22, 1),
              opacity 150ms ease-out;
}

.studio-page__feed--hidden {
  width: 0;
  opacity: 0;
  border-right: none;
  overflow: hidden;
}

.studio-page__feed-header {
  flex-shrink: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  border-bottom: 1px solid #28282F;
  background: #0A0A0C;
}

.studio-page__feed-content {
  flex: 1;
  overflow: auto;
}

/* =============================================================================
 * Editor (Center)
 * ============================================================================= */

.studio-page__editor {
  flex: 1;
  overflow: hidden;
  outline: none;
  background: #0A0A0C; /* steel-obsidian */
}

.studio-page__editor:focus-visible {
  box-shadow: inset 0 0 0 2px #C4A77D; /* glow-spore */
}

/* =============================================================================
 * Witness Trail (Right)
 * ============================================================================= */

.studio-page__witness {
  width: 260px;
  flex-shrink: 0;
  background: #141418; /* steel-carbon */
  border-left: 1px solid #28282F; /* steel-gunmetal */
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transition: width 200ms cubic-bezier(0.19, 1, 0.22, 1),
              opacity 150ms ease-out;
}

.studio-page__witness--hidden {
  width: 0;
  opacity: 0;
  border-left: none;
  overflow: hidden;
}

.studio-page__witness-header {
  flex-shrink: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  border-bottom: 1px solid #28282F;
  background: #0A0A0C;
}

.studio-page__witness-content {
  flex: 1;
  overflow: auto;
  padding: 12px;
}

/* =============================================================================
 * Sidebar Common Styles
 * ============================================================================= */

.studio-page__sidebar-title {
  font-size: 0.75rem;
  font-weight: 600;
  color: #D2D2DC;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.studio-page__sidebar-shortcut {
  font-size: 0.625rem;
  color: #5A5A64; /* text-muted */
  background: #1C1C22; /* steel-slate */
  padding: 2px 6px;
  border-radius: 3px;
  font-family: 'JetBrains Mono', monospace;
}

/* =============================================================================
 * Session Stats
 * ============================================================================= */

.studio-page__session-stats {
  flex-shrink: 0;
  padding: 12px 16px;
  border-top: 1px solid #28282F;
  background: #0A0A0C;
}

.studio-page__stat {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.studio-page__stat-label {
  font-size: 0.625rem;
  font-weight: 600;
  color: #5A5A64;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.studio-page__stat-value {
  font-size: 0.75rem;
  color: #6B8B6B; /* life-mint */
  font-weight: 500;
}

/* =============================================================================
 * Focus States — Earned Glow
 * ============================================================================= */

.studio-page__feed:focus-within .studio-page__feed-header,
.studio-page__witness:focus-within .studio-page__witness-header {
  border-bottom-color: #C4A77D; /* glow-spore */
}

/* =============================================================================
 * Responsive Design
 * ============================================================================= */

@media (max-width: 1200px) {
  .studio-page__feed {
    width: 240px;
  }

  .studio-page__witness {
    width: 220px;
  }
}

@media (max-width: 992px) {
  .studio-page__feed {
    width: 200px;
  }

  .studio-page__witness {
    width: 180px;
  }
}

@media (max-width: 768px) {
  /* Hide sidebars by default on mobile */
  .studio-page__feed {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 280px;
    z-index: 100;
    transform: translateX(-100%);
    transition: transform 200ms cubic-bezier(0.19, 1, 0.22, 1);
  }

  .studio-page__feed:not(.studio-page__feed--hidden) {
    transform: translateX(0);
  }

  .studio-page__witness {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 260px;
    z-index: 100;
    transform: translateX(100%);
    transition: transform 200ms cubic-bezier(0.19, 1, 0.22, 1);
  }

  .studio-page__witness:not(.studio-page__witness--hidden) {
    transform: translateX(0);
  }

  /* Add overlay when sidebar is open */
  .studio-page__main::before {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(10, 10, 12, 0.8);
    opacity: 0;
    pointer-events: none;
    z-index: 99;
    transition: opacity 200ms ease-out;
  }

  .studio-page__main:has(.studio-page__feed:not(.studio-page__feed--hidden))::before,
  .studio-page__main:has(.studio-page__witness:not(.studio-page__witness--hidden))::before {
    opacity: 1;
    pointer-events: auto;
  }
}

/* =============================================================================
 * 4-7-8 Breathing Animation (only for loading states)
 * ============================================================================= */

@keyframes breathe-478 {
  /* Inhale: 4 beats (0-29.6%) */
  0% {
    opacity: 0.3;
    transform: scale(0.98);
  }
  29.6% {
    opacity: 0.6;
    transform: scale(1);
  }
  /* Hold: 7 beats (29.6-81.5%) */
  81.5% {
    opacity: 0.6;
    transform: scale(1);
  }
  /* Exhale: 8 beats (81.5-100%) - slow exhale */
  100% {
    opacity: 0.3;
    transform: scale(0.98);
  }
}

.studio-page__loading {
  animation: breathe-478 6.75s ease-in-out infinite;
}

/* =============================================================================
 * Scrollbar Styling
 * ============================================================================= */

.studio-page__feed-content::-webkit-scrollbar,
.studio-page__witness-content::-webkit-scrollbar {
  width: 6px;
}

.studio-page__feed-content::-webkit-scrollbar-track,
.studio-page__witness-content::-webkit-scrollbar-track {
  background: transparent;
}

.studio-page__feed-content::-webkit-scrollbar-thumb,
.studio-page__witness-content::-webkit-scrollbar-thumb {
  background: #28282F; /* steel-gunmetal */
  border-radius: 3px;
}

.studio-page__feed-content::-webkit-scrollbar-thumb:hover,
.studio-page__witness-content::-webkit-scrollbar-thumb:hover {
  background: #3A3A42;
}

/* =============================================================================
 * Witness Trail Override (compact in sidebar)
 * ============================================================================= */

.studio-page__witness-content .witness-trail {
  font-size: 0.75rem;
}

.studio-page__witness-content .witness-trail__metadata {
  font-size: 0.625rem;
  color: #5A5A64;
}

.studio-page__witness-content .witness-mark {
  padding: 8px 10px;
  background: #1C1C22; /* steel-slate */
  border: 1px solid #28282F;
  border-radius: 3px;
  margin-bottom: 8px;
}

.studio-page__witness-content .witness-mark:hover {
  border-color: #C4A77D; /* glow-spore */
}

.studio-page__witness-content .witness-trail__connection {
  width: 1px;
  height: 12px;
  background: #28282F;
  margin: 0 auto;
}
