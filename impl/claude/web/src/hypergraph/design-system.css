/**
 * KGENTS DESIGN SYSTEM — Hypergraph Editor
 *
 * "Daring, bold, creative, opinionated but not gaudy"
 * "Tasteful > feature-complete"
 *
 * STARK BIOME: 90% steel, 10% earned glow
 *
 * This file defines hypergraph-specific design tokens. Core tokens (--steel-*,
 * --status-*, --health-*) are shared with globals.css but duplicated here to
 * allow this component to be used standalone or with custom overrides.
 *
 * DESIGN SYSTEM RELATIONSHIP:
 *   globals.css      → Global tokens for entire app (comprehensive)
 *   design-system.css → Hypergraph-specific tokens (focused subset + extensions)
 *
 * INTENTIONAL DUPLICATION:
 *   - --steel-* colors (for standalone component usage)
 *   - --status-* mode colors (same semantics, same values)
 *   - --health-* confidence indicators (same semantics, same values)
 *
 * HYPERGRAPH-SPECIFIC TOKENS:
 *   - --z-sidebar, --z-panel, --z-overlay (component z-index layers)
 *   - --backdrop-* (modal/panel backdrops)
 *   - --shadow-* (elevation shadows)
 *   - Micro-interaction utilities (.hover-lift, .hover-glow, etc.)
 *
 * @see src/styles/globals.css for global design tokens
 */

/* =============================================================================
   Color Palette (STARK BIOME)
   Duplicated from globals.css for standalone component usage
   ============================================================================= */

:root {
  /* Steel scale (dark grays) — the foundation
     NOTE: Also defined in globals.css with expanded palette (obsidian, carbon, etc.) */
  --steel-950: #0d0d0d;   /* Deep background */
  --steel-900: #1a1a1a;   /* Surface */
  --steel-850: #1f1f1f;   /* Mid-surface */
  --steel-800: #252525;   /* Elevated */
  --steel-700: #333;      /* Border */
  --steel-600: #444;      /* Hover border */
  --steel-500: #666;      /* Muted text */
  --steel-400: #888;      /* Secondary text */
  --steel-300: #a0a0a0;   /* Tertiary text */
  --steel-200: #ccc;      /* Light text */
  --steel-100: #e0e0e0;   /* Primary text */

  /* Status/Mode colors — earned glow
     NOTE: Also defined in globals.css (same values, shared semantics) */
  --status-normal: #4a9eff;   /* Blue — normal mode */
  --status-insert: #4caf50;   /* Green — insert mode, life-sage */
  --status-edge: #ff9800;     /* Orange — edge mode, glow-spore */
  --status-visual: #9c27b0;   /* Purple — visual/dialectic mode */
  --status-witness: #e91e63;  /* Magenta — witness mode */
  --status-error: #f44336;    /* Red — errors */

  /* Accents
     NOTE: globals.css uses --accent-gold: #d4b88c (glow-amber, muted)
           Hypergraph uses #ffd700 (bright gold) for selection visibility */
  --accent-gold: #ffd700;     /* Selection, highlights */

  /* Health colors (for confidence indicators)
     NOTE: Also defined in globals.css (same values, shared semantics) */
  --health-healthy: #22c55e;   /* >= 80% */
  --health-degraded: #facc15;  /* 60-80% */
  --health-warning: #f97316;   /* 40-60% */
  --health-critical: #ef4444;  /* < 40% */
}

/* =============================================================================
   Typography
   NOTE: --font-mono also defined in globals.css (same value)
   ============================================================================= */

:root {
  --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
  --font-size-xs: 0.625rem;   /* 10px */
  --font-size-sm: 0.75rem;    /* 12px */
  --font-size-md: 0.875rem;   /* 14px */
  --font-size-lg: 1rem;       /* 16px */
  --font-size-xl: 1.25rem;    /* 20px */
  --line-height-tight: 1.3;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.7;
}

/* =============================================================================
   Spacing Scale
   NOTE: globals.css uses --elastic-gap-* for spacing (different naming convention)
         Hypergraph uses --space-* for simpler token names
   ============================================================================= */

:root {
  --space-xs: 0.2rem;    /* 3.2px */
  --space-sm: 0.4rem;    /* 6.4px */
  --space-md: 0.85rem;   /* 13.6px */
  --space-lg: 1.25rem;   /* 20px */
  --space-xl: 1.75rem;   /* 28px */
  --space-2xl: 2.5rem;   /* 40px */
}

/* =============================================================================
   Border Radius Scale
   NOTE: globals.css uses --radius-none/bare/subtle/soft/pill ("Bare Edge" system)
         Hypergraph uses --radius-sm/md/lg/xl/pill (traditional t-shirt sizing)
         Both philosophies serve the STARK BIOME aesthetic
   ============================================================================= */

:root {
  --radius-sm: 2px;    /* Tight elements (kbd, badges) — matches --radius-bare */
  --radius-md: 4px;    /* Buttons, inputs — matches --radius-soft */
  --radius-lg: 6px;    /* Panels, cards */
  --radius-xl: 8px;    /* Modals, major containers */
  --radius-pill: 12px; /* Tags, pills — different from globals --radius-pill: 9999px */
}

/* =============================================================================
   Animation Timing
   NOTE: globals.css uses --duration-* + --ease-* separately
         Hypergraph uses --transition-* (duration + easing combined)
   ============================================================================= */

:root {
  --transition-fast: 0.12s ease;
  --transition-normal: 0.16s ease;
  --transition-slow: 0.25s cubic-bezier(0.16, 1, 0.3, 1);

  /* Easing functions — "Everything Breathes" */
  --easing-spring: cubic-bezier(0.16, 1, 0.3, 1);
  --easing-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
  --easing-spring-gentle: cubic-bezier(0.34, 1.2, 0.64, 1);
  --easing-spring-bouncy: cubic-bezier(0.34, 1.56, 0.64, 1);  /* Also in globals as --ease-spring */
}

/* =============================================================================
   Z-Index Layers (HYPERGRAPH-SPECIFIC)
   NOTE: globals.css uses --elastic-z-* for global UI layers
         These are hypergraph component-specific layers
   ============================================================================= */

:root {
  --z-base: 0;
  --z-sidebar: 100;        /* GraphSidebar, permanent UI */
  --z-panel: 150;          /* EdgePanel, DialecticModal, temporary overlays */
  --z-overlay: 200;        /* DialogueView, DecisionStream, full-screen modals */
  --z-modal: 1000;         /* HelpPanel, top-level UI */
}

/* =============================================================================
   Backdrop Effects (HYPERGRAPH-SPECIFIC)
   ============================================================================= */

:root {
  --backdrop-blur-light: blur(4px);
  --backdrop-blur-heavy: blur(8px);
  --backdrop-overlay-light: rgba(0, 0, 0, 0.6);
  --backdrop-overlay-medium: rgba(0, 0, 0, 0.75);
  --backdrop-overlay-heavy: rgba(0, 0, 0, 0.85);
}

/* =============================================================================
   Shadow Scale (HYPERGRAPH-SPECIFIC)
   ============================================================================= */

:root {
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
  --shadow-xl: 0 12px 48px rgba(0, 0, 0, 0.6);
  --shadow-2xl: 0 16px 64px rgba(0, 0, 0, 0.8);
}

/* =============================================================================
   Shared Component Patterns
   ============================================================================= */

/* Kbd element styling (consistent across all components) */
kbd {
  display: inline-block;
  padding: 0.1rem 0.3rem;
  background: var(--steel-800);
  border: 1px solid var(--steel-700);
  border-radius: var(--radius-sm);
  font-family: var(--font-mono);
  font-size: var(--font-size-xs);
  color: var(--steel-300);
  font-weight: 500;
  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.2);
}

/* =============================================================================
   Collapsed Sidebar Pattern (Reusable Utility)
   ============================================================================= */

/**
 * Collapsed sidebar label pattern - ensures rotated text stays within bounds
 *
 * Problem: When using `writing-mode: vertical-rl` for sidebar labels, rotated
 * text can overflow the collapsed container if overflow is not managed.
 *
 * Solution: Apply this class to any collapsed sidebar container that contains
 * vertical text. It ensures proper containment.
 *
 * Key principles:
 * 1. overflow: hidden - Prevents rotated content from escaping container
 * 2. Fixed width - Container must have explicit dimensions for containment
 * 3. position: relative - Establishes stacking context for absolute children
 *
 * Usage:
 *   <aside class="sidebar sidebar--collapsed collapsed-sidebar-container">
 *     <button class="sidebar__toggle">
 *       <span class="collapsed-sidebar-label">FILES</span>
 *     </button>
 *   </aside>
 *
 * Applied to:
 * - ProofPanel (32px collapsed)
 * - Workspace left/right sidebars (40px collapsed)
 * - Any future collapsible panels with vertical labels
 */
.collapsed-sidebar-container {
  overflow: hidden;
  position: relative;
}

.collapsed-sidebar-label {
  writing-mode: vertical-rl;
  text-orientation: mixed;
  white-space: nowrap;
  /* Ensure label stays centered within collapsed container */
  display: inline-block;
}

/* =============================================================================
   Input Primitives (Consistent across all inputs)
   ============================================================================= */

/**
 * Base input styling with proper contrast and STARK BIOME aesthetics.
 *
 * Philosophy:
 * - Dark background (--steel-800/900) ensures contrast with light text
 * - Gold caret (--accent-gold) for visibility and brand consistency
 * - Muted placeholder (--steel-500) reduces noise
 * - Border feedback on focus (--steel-600) without color overload
 * - Disabled state (opacity) maintains visual hierarchy
 *
 * Usage:
 *   <input className="input-base" />
 *   <input className="input-base input-inline" /> (for transparent bg)
 *   <input className="input-base input-accent" /> (for highlighted states)
 */

.input-base {
  /* Layout */
  width: 100%;
  padding: var(--space-sm) var(--space-md);

  /* Surface */
  background: var(--steel-900);
  border: 1px solid var(--steel-700);
  border-radius: var(--radius-md);

  /* Typography */
  color: var(--steel-100);
  font-family: var(--font-mono);
  font-size: var(--font-size-md);
  line-height: var(--line-height-normal);

  /* Interaction */
  transition: var(--transition-fast);
  caret-color: var(--accent-gold);
  outline: none;
}

.input-base:focus {
  border-color: var(--steel-600);
  background: var(--steel-800);
  box-shadow: 0 0 0 1px var(--steel-600);
}

.input-base::placeholder {
  color: var(--steel-500);
  opacity: 1;
}

.input-base:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  background: var(--steel-850);
}

/* Variant: Inline (transparent background) */
.input-inline {
  background: transparent;
  border: none;
  padding: 0.25rem 0.5rem;
}

.input-inline:focus {
  background: transparent;
  box-shadow: none;
  border-color: transparent;
}

/* Variant: Accent (for highlighted/special states like rename) */
.input-accent {
  border-color: var(--status-visual);
}

.input-accent:focus {
  border-color: var(--status-visual);
  box-shadow: 0 0 0 1px var(--status-visual);
}

/* Variant: Small (compact spacing) */
.input-sm {
  padding: 0.25rem 0.5rem;
  font-size: var(--font-size-sm);
}

/* Variant: Error state */
.input-error {
  border-color: var(--status-error);
}

.input-error:focus {
  border-color: var(--status-error);
  box-shadow: 0 0 0 1px var(--status-error);
}

/* Focus ring (for accessibility) */
:focus-visible {
  outline: 2px solid var(--accent-gold);
  outline-offset: 2px;
}

/* Scrollbar styling (consistent across modals/panels) */
.design-system-scrollbar::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.design-system-scrollbar::-webkit-scrollbar-track {
  background: var(--steel-900);
}

.design-system-scrollbar::-webkit-scrollbar-thumb {
  background: var(--steel-700);
  border-radius: var(--radius-md);
}

.design-system-scrollbar::-webkit-scrollbar-thumb:hover {
  background: var(--steel-600);
}

/* =============================================================================
   Micro-interaction Utilities
   ============================================================================= */

/**
 * "Stillness, then life" — 90% calm, 10% delight
 *
 * These utilities add delightful feedback to interactive elements.
 * All use GPU-accelerated properties (transform, opacity) for smooth 60fps.
 */

/* Subtle Y lift + shadow on hover (e.g., cards, buttons) */
.hover-lift {
  transition: transform 0.2s var(--easing-spring-gentle),
              box-shadow 0.2s var(--easing-spring-gentle);
}

.hover-lift:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.hover-lift:active {
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
  transition-duration: 0.1s;
}

/* Subtle glow on hover (e.g., node highlights, interactive elements) */
.hover-glow {
  transition: box-shadow 0.2s var(--easing-spring-gentle);
}

.hover-glow:hover {
  box-shadow: 0 0 12px rgba(255, 215, 0, 0.3); /* Gold glow */
}

/* Tiny scale up on hover (e.g., icons, chips) */
.hover-scale {
  transition: transform 0.2s var(--easing-spring-gentle);
}

.hover-scale:hover {
  transform: scale(1.02);
}

.hover-scale:active {
  transform: scale(0.98);
  transition-duration: 0.1s;
}

/* Press down effect for active state (e.g., buttons) */
.press-down:active {
  transform: translateY(1px);
  transition: transform 0.1s ease;
}

/* Gold focus ring for accessibility */
.focus-ring-gold:focus-visible {
  outline: 2px solid var(--accent-gold);
  outline-offset: 2px;
  border-radius: var(--radius-sm);
}

/* Respect user motion preferences */
@media (prefers-reduced-motion: reduce) {
  .hover-lift,
  .hover-glow,
  .hover-scale,
  .press-down {
    transition: none !important;
  }

  .hover-lift:hover {
    transform: none;
  }

  .hover-scale:hover,
  .hover-scale:active {
    transform: none;
  }

  .press-down:active {
    transform: none;
  }
}

/* =============================================================================
   GPU Acceleration (for smooth animations)
   ============================================================================= */

.will-animate {
  will-change: transform, opacity;
  transform: translateZ(0);
}

/* =============================================================================
   Button Primitives (STARK BIOME 2.0)
   ============================================================================= */

/**
 * Unified button system with opinionated aesthetics.
 *
 * Philosophy:
 * - "Daring, bold, creative, opinionated but not gaudy"
 * - Buttons have subtle spring-based hover effects (--easing-spring)
 * - Focus states use gold outline for brand consistency
 * - Primary = life-sage green (earned vitality)
 * - Accent = glow-spore gold (special moments)
 * - Steel surface = calm industrial base
 *
 * Usage:
 *   <button className="btn-base btn-primary">Action</button>
 *   <button className="btn-base btn-secondary">Cancel</button>
 *   <button className="btn-base btn-accent">Special</button>
 *   <button className="btn-base btn-ghost">Subtle</button>
 *   <button className="btn-base btn-primary btn-sm">Small</button>
 *   <button className="btn-base btn-primary btn-lg">Large</button>
 */

/* Base Button — Foundation */
.btn-base {
  /* Layout */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-sm);
  padding: 0.65rem 1.25rem;

  /* Typography */
  font-family: var(--font-mono);
  font-size: var(--font-size-md);
  font-weight: 500;
  letter-spacing: 0.01em;
  text-transform: none;
  line-height: var(--line-height-tight);

  /* Surface */
  background: var(--steel-800);
  border: 1px solid var(--steel-700);
  border-radius: var(--radius-md);
  color: var(--steel-200);

  /* Interaction */
  cursor: pointer;
  user-select: none;
  outline: none;
  transition:
    all var(--transition-normal),
    transform var(--transition-fast);
  transform-style: preserve-3d;
  will-change: transform, box-shadow;
}

.btn-base:hover {
  border-color: var(--steel-600);
  background: var(--steel-700);
  color: var(--steel-100);
  box-shadow: var(--shadow-sm);
  transform: translateY(-1px);
}

.btn-base:active {
  transform: translateY(0) scale(0.98);
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
  transition: transform 0.1s ease-out;
}

.btn-base:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
  background: var(--steel-850);
}

.btn-base:focus-visible {
  outline: 2px solid var(--accent-gold);
  outline-offset: 2px;
}

/* Variant: Primary (Life-Sage Green) */
.btn-primary {
  background: var(--status-insert);
  color: var(--steel-950);
  border-color: var(--status-insert);
  font-weight: 600;
}

.btn-primary:hover {
  background: #5bc75f;  /* Brighter life-mint */
  border-color: #5bc75f;
  color: var(--steel-950);
  box-shadow:
    0 2px 12px rgba(76, 175, 80, 0.25),
    0 0 20px rgba(76, 175, 80, 0.1);
}

/* Variant: Secondary (Steel Surface) */
.btn-secondary {
  background: var(--steel-800);
  border-color: var(--steel-700);
  color: var(--steel-200);
}

.btn-secondary:hover {
  background: var(--steel-700);
  border-color: var(--steel-600);
  color: var(--steel-100);
}

/* Variant: Accent (Glow-Spore Gold Border) */
.btn-accent {
  background: linear-gradient(135deg, var(--steel-800) 0%, var(--steel-850) 100%);
  border-color: var(--accent-gold);
  color: var(--accent-gold);
  position: relative;
  overflow: hidden;
}

.btn-accent::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255, 215, 0, 0.2) 0%, transparent 70%);
  transform: translate(-50%, -50%);
  transition: width 0.6s var(--easing-spring), height 0.6s var(--easing-spring);
  pointer-events: none;
}

.btn-accent:hover::before {
  width: 200px;
  height: 200px;
}

.btn-accent:hover {
  border-color: #ffd700;
  color: #ffd700;
  box-shadow:
    0 2px 16px rgba(255, 215, 0, 0.3),
    0 0 30px rgba(255, 215, 0, 0.15);
}

/* Variant: Ghost (Minimal/Text Button) */
.btn-ghost {
  background: transparent;
  border-color: transparent;
  color: var(--steel-400);
  padding: 0.5rem 0.75rem;
}

.btn-ghost:hover {
  background: var(--steel-850);
  border-color: var(--steel-700);
  color: var(--steel-200);
  box-shadow: none;
}

.btn-ghost:active {
  background: var(--steel-800);
}

/* Size Variant: Small */
.btn-sm {
  padding: 0.4rem 0.85rem;
  font-size: var(--font-size-sm);
  gap: 0.25rem;
}

/* Size Variant: Large */
.btn-lg {
  padding: 0.875rem 1.75rem;
  font-size: var(--font-size-lg);
  gap: 0.625rem;
}

/* Icon-only buttons (square aspect) */
.btn-icon {
  padding: 0.65rem;
  aspect-ratio: 1;
}

.btn-icon.btn-sm {
  padding: 0.4rem;
}

.btn-icon.btn-lg {
  padding: 0.875rem;
}

/* Loading state (optional utility) */
.btn-loading {
  pointer-events: none;
  opacity: 0.7;
  position: relative;
}

.btn-loading::after {
  content: '';
  position: absolute;
  width: 1rem;
  height: 1rem;
  border: 2px solid currentColor;
  border-top-color: transparent;
  border-radius: 50%;
  animation: btn-spin 0.6s linear infinite;
}

@keyframes btn-spin {
  to {
    transform: rotate(360deg);
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .btn-base {
    transition: none;
    transform: none !important;
  }

  .btn-base:hover {
    transform: none;
  }

  .btn-base:active {
    transform: none;
  }

  .btn-accent::before {
    transition: none;
  }

  .btn-loading::after {
    animation: none;
  }
}
