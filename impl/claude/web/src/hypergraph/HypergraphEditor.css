/**
 * HypergraphEditor — Main editor styles
 *
 * Stark biome: 90% steel, 10% earned glow
 * "The file is a lie. There is only the graph."
 */

@import './design-system.css';

/* =============================================================================
   Root Container
   ============================================================================= */

.hypergraph-editor {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--steel-950, #0d0d0d);
  color: var(--steel-100, #e0e0e0);
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  font-size: 0.875rem;
  line-height: 1.5;
}

/* Mode-specific accent */
.hypergraph-editor[data-mode='INSERT'] {
  --mode-accent: var(--status-insert, #4caf50);
}

.hypergraph-editor[data-mode='EDGE'] {
  --mode-accent: var(--status-edge, #ff9800);
}

.hypergraph-editor[data-mode='VISUAL'] {
  --mode-accent: var(--status-visual, #9c27b0);
}

.hypergraph-editor[data-mode='WITNESS'] {
  --mode-accent: var(--status-witness, #e91e63);
}

/* =============================================================================
   Header
   ============================================================================= */

.hypergraph-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.5rem 1rem;
  background: var(--steel-900, #1a1a1a);
  border-bottom: 1px solid var(--steel-800, #252525);
}

.hypergraph-header--empty {
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 1rem;
}

.hypergraph-header__parent,
.hypergraph-header__child {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  min-width: 10rem;
  color: var(--steel-400, #888);
  font-size: 0.75rem;
}

.hypergraph-header__child {
  justify-content: flex-end;
}

.hypergraph-header__arrow {
  font-size: 0.875rem;
}

.hypergraph-header__arrow--dim {
  opacity: 0.3;
}

.hypergraph-header__parent-label,
.hypergraph-header__child-label {
  color: var(--steel-500, #666);
}

.hypergraph-header__title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 1rem;
  font-weight: 500;
  color: var(--steel-100, #e0e0e0);
}

.hypergraph-header__tier {
  padding: 0.125rem 0.375rem;
  font-size: 0.625rem;
  font-weight: 600;
  text-transform: uppercase;
  border-radius: 2px;
  background: var(--steel-800, #252525);
  color: var(--steel-400, #888);
}

.hypergraph-header__tier[data-tier='CANONICAL'] {
  background: var(--accent-gold, #ffd700);
  color: var(--steel-900, #1a1a1a);
}

.hypergraph-header__tier[data-tier='RICH'] {
  background: var(--status-insert, #4caf50);
  color: var(--steel-900, #1a1a1a);
}

.hypergraph-header__tier[data-tier='STUB'] {
  background: var(--steel-700, #333);
}

.hypergraph-header__tier[data-tier='GHOST'] {
  background: transparent;
  border: 1px dashed var(--steel-600, #444);
}

.hypergraph-header__hint {
  color: var(--steel-500, #666);
  font-size: 0.75rem;
}

/* =============================================================================
   Actions Toolbar
   ============================================================================= */

.hypergraph-editor__toolbar {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.25rem 1rem;
  background: var(--steel-900, #1a1a1a);
  border-bottom: 1px solid var(--steel-800, #252525);
}

.hypergraph-editor__action {
  padding: 4px 12px;
  border-radius: 4px;
  border: 1px solid var(--steel-700, #333);
  background: var(--steel-800, #252525);
  color: var(--steel-200, #ccc);
  cursor: pointer;
  font-family: inherit;
  font-size: 0.75rem;
  transition: all 0.15s ease;
}

.hypergraph-editor__action:hover:not(:disabled) {
  background: var(--steel-700, #333);
  border-color: var(--steel-600, #444);
  color: var(--steel-100, #e0e0e0);
}

.hypergraph-editor__action:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* =============================================================================
   Trail Bar
   ============================================================================= */

.hypergraph-trail {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.25rem 1rem;
  background: var(--steel-900, #1a1a1a);
  border-bottom: 1px solid var(--steel-800, #252525);
  font-size: 0.75rem;
  color: var(--steel-500, #666);
}

.hypergraph-trail__label {
  font-weight: 600;
  color: var(--steel-400, #888);
}

.hypergraph-trail__path {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.hypergraph-trail__mode {
  font-weight: 600;
  color: var(--mode-accent, var(--steel-400, #888));
}

/* =============================================================================
   Main Content Area
   ============================================================================= */

.hypergraph-editor__main {
  display: flex;
  flex: 1;
  overflow: hidden;
  position: relative;
}

/* Loading state - greys out content during navigation */
.hypergraph-editor__main--loading {
  pointer-events: none;
}

.hypergraph-editor__main--loading > *:not(.hypergraph-editor__loading-overlay) {
  opacity: 0.4;
  filter: grayscale(30%);
  transition:
    opacity 0.15s ease-out,
    filter 0.15s ease-out;
}

.hypergraph-editor__loading-overlay {
  position: absolute;
  inset: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.1);
  pointer-events: none;
}

.hypergraph-editor__loading-spinner {
  width: 24px;
  height: 24px;
  border: 2px solid var(--steel-600, #555);
  border-top-color: var(--steel-200, #ccc);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* =============================================================================
   Edge Gutters
   ============================================================================= */

.edge-gutter {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  padding: 0.375rem;
  min-width: 3rem;
  background: var(--steel-900, #1a1a1a);
  border-color: var(--steel-800, #252525);
}

.edge-gutter--left {
  border-right: 1px solid var(--steel-800, #252525);
  align-items: flex-end;
}

.edge-gutter--right {
  border-left: 1px solid var(--steel-800, #252525);
  align-items: flex-start;
}

.edge-gutter--empty {
  opacity: 0.3;
}

.edge-gutter__badge {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.125rem 0.25rem;
  background: var(--steel-800, #252525);
  border: 1px solid var(--steel-700, #333);
  border-radius: 2px;
  color: var(--steel-400, #888);
  font-size: 0.625rem;
  font-family: inherit;
  cursor: pointer;
  transition: all 0.15s ease;
}

.edge-gutter__badge:hover {
  background: var(--steel-700, #333);
  color: var(--steel-200, #ccc);
}

/* Active/pressed state - immediate visual feedback */
.edge-gutter__badge:active {
  transform: scale(0.95);
  background: var(--steel-600, #444);
  color: var(--steel-100, #e0e0e0);
  transition: transform 0.05s ease;
}

/* Focus state for accessibility */
.edge-gutter__badge:focus {
  outline: 2px solid var(--steel-500, #666);
  outline-offset: 1px;
}

.edge-gutter__badge:focus:not(:focus-visible) {
  outline: none;
}

/* Edge type colors */
.edge-gutter__badge[data-edge-type='implements'] {
  border-left: 1px solid var(--status-insert, #4caf50);
}

.edge-gutter__badge[data-edge-type='tests'] {
  border-left: 1px solid var(--status-normal, #4a9eff);
}

.edge-gutter__badge[data-edge-type='extends'],
.edge-gutter__badge[data-edge-type='derives_from'] {
  border-left: 1px solid var(--status-edge, #ff9800);
}

.edge-gutter__badge[data-edge-type='references'] {
  border-left: 1px solid var(--steel-500, #666);
}

.edge-gutter__badge[data-edge-type='contradicts'] {
  border-left: 1px solid var(--status-error, #f44336);
}

.edge-gutter__abbrev {
  font-weight: 500;
}

.edge-gutter__count {
  color: var(--steel-500, #666);
}

.edge-gutter__witness {
  font-size: 0.5rem;
  margin-left: 0.125rem;
}

/* =============================================================================
   Confidence-based Edge Styling (WitnessedGraph Evidence)
   ============================================================================= */

/* CSS Variables for confidence colors */
.edge-gutter {
  --color-edge-high: #4caf50; /* Green - high confidence */
  --color-edge-medium: #ff9800; /* Orange - medium confidence */
  --color-edge-low: #f44336; /* Red - low confidence */
  --color-edge-unknown: #9e9e9e; /* Gray - unknown confidence */
}

/* High confidence (80%+): green border */
.edge-gutter__badge--high {
  border-left: 2px solid var(--color-edge-high);
}

.edge-gutter__badge--high:hover {
  background: var(--steel-700, #333);
  border-color: var(--color-edge-high);
}

/* Medium confidence (50-80%): orange border */
.edge-gutter__badge--medium {
  border-left: 2px solid var(--color-edge-medium);
}

.edge-gutter__badge--medium:hover {
  background: var(--steel-700, #333);
  border-color: var(--color-edge-medium);
}

/* Low confidence (<50%): red border */
.edge-gutter__badge--low {
  border-left: 2px solid var(--color-edge-low);
}

.edge-gutter__badge--low:hover {
  background: var(--steel-700, #333);
  border-color: var(--color-edge-low);
}

/* Unknown confidence: gray border */
.edge-gutter__badge--unknown {
  border-left: 2px solid var(--color-edge-unknown);
}

.edge-gutter__badge--unknown:hover {
  background: var(--steel-700, #333);
}

/* =============================================================================
   Witnessed Edge Styling — Mark/Decision Links
   ============================================================================= */

/*
 * Witnessed edges represent decisions captured in the witness system.
 *
 * Visual Identity:
 * - Color: #8B4513 (brown/earthy) — grounded, historical decisions
 * - Stroke: dashed pattern — distinguishes from regular edges
 * - Right border: gold accent for witnessed status
 *
 * "The proof IS the decision. The mark IS the witness."
 */

/* Witnessed edges get earthy brown accent */
.edge-gutter__badge[data-has-witness='true'] {
  border-right: 2px solid #8b4513;
  position: relative;
}

/* Enhanced visual feedback on hover for witnessed edges */
.edge-gutter__badge[data-has-witness='true']:hover {
  background: rgba(139, 69, 19, 0.15);
  border-right-color: #a0522d; /* Lighter sienna on hover */
}

/* Edge type = witnessed (explicit kind) */
.edge-gutter__badge[data-edge-type='witnessed'] {
  border-left: 2px solid #8b4513;
  border-right: 2px solid rgba(255, 215, 0, 0.5);
}

.edge-gutter__badge[data-edge-type='witnessed']:hover {
  background: rgba(139, 69, 19, 0.2);
}

/* Witnessed edges in SVG rendering */
.witnessed-edge {
  stroke: #8b4513;
  stroke-width: 2.5px;
  stroke-dasharray: 5, 5; /* Dashed pattern */
  opacity: 0.85;
  transition: all 0.15s ease;
}

.witnessed-edge:hover {
  opacity: 1;
  stroke-width: 3px;
  stroke: #a0522d;
}

/* Mark indicator for witnessed edges */
.witnessed-edge-label {
  fill: #8b4513;
  font-size: 0.6rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

/* Combination: High-confidence + Witnessed edge */
.edge-gutter__badge--high[data-has-witness='true'] {
  border-left-color: var(--color-edge-high);
  border-right-color: #8b4513;
}

/* Combination: Medium-confidence + Witnessed edge */
.edge-gutter__badge--medium[data-has-witness='true'] {
  border-left-color: var(--color-edge-medium);
  border-right-color: #8b4513;
}

/* Combination: Low-confidence + Witnessed edge */
.edge-gutter__badge--low[data-has-witness='true'] {
  border-left-color: var(--color-edge-low);
  border-right-color: #8b4513;
}

/* =============================================================================
   Zero Seed Derivation Edges (gD navigation)
   ============================================================================= */

/* Derivation edges are highlighted for gD navigation */
.edge-gutter__badge--derivation {
  background: rgba(139, 92, 246, 0.1); /* Purple tint for derivation */
  border-left: 2px solid var(--color-axiom, #8b5cf6);
}

.edge-gutter__badge--derivation:hover {
  background: rgba(139, 92, 246, 0.2);
  border-color: var(--color-axiom, #8b5cf6);
}

/* Foundational edges link to Zero Seed axioms (A1, A2, G) */
.edge-gutter__badge--foundational {
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(167, 139, 250, 0.1) 100%);
  border-left: 3px solid var(--color-axiom, #8b5cf6);
  box-shadow: 0 0 4px rgba(139, 92, 246, 0.3);
}

.edge-gutter__badge--foundational:hover {
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.25) 0%, rgba(167, 139, 250, 0.2) 100%);
  box-shadow: 0 0 8px rgba(139, 92, 246, 0.5);
}

/* Foundational star indicator */
.edge-gutter__foundational-star {
  color: var(--color-axiom, #8b5cf6);
  font-size: 0.6rem;
  margin-left: 0.15rem;
}

/* =============================================================================
   Content Pane
   ============================================================================= */

.content-pane {
  flex: 1;
  overflow: hidden; /* Don't scroll here - let child containers handle scroll */
  background: var(--steel-950, #0d0d0d);
}

.content-pane--empty {
  display: flex;
  align-items: center;
  justify-content: center;
}

.content-pane__welcome {
  text-align: center;
  color: var(--steel-500, #666);
}

.content-pane__welcome h2 {
  margin: 0 0 0.5rem;
  font-size: 1.25rem;
  font-weight: 500;
  color: var(--steel-300, #a0a0a0);
}

.content-pane__welcome p {
  margin: 0 0 1.5rem;
  font-style: italic;
}

.content-pane__hints {
  text-align: left;
  display: inline-block;
}

.content-pane__hints p {
  margin: 0.25rem 0;
}

.content-pane__hints kbd {
  display: inline-block;
  padding: 0.125rem 0.375rem;
  margin-right: 0.5rem;
  background: var(--steel-800, #252525);
  border: 1px solid var(--steel-700, #333);
  border-radius: 2px;
  font-family: inherit;
  font-size: 0.75rem;
  color: var(--steel-300, #a0a0a0);
}

/* Normal mode: reader view (readonly CodeMirror with syntax highlighting) */
.content-pane--normal {
  padding: 0;
  position: relative;
  display: flex;
}

/* Reader view styling - clean, focused reading experience */
.content-pane__reader {
  /* Slightly larger text for reading comfort */
  font-size: 0.9375rem;
  line-height: 1.6;
}

/* Hide line numbers in reader mode for cleaner appearance */
.content-pane--normal .cm-gutters {
  display: none !important;
}

/* Reader mode has subtle left padding since no line numbers */
.content-pane--normal .cm-content {
  padding-left: 1rem;
}

/* Ensure cursor is hidden in readonly mode */
.content-pane--normal .cm-cursor {
  display: none !important;
}

/* Subtle indicator that this is view-only */
.content-pane--normal::after {
  content: 'VIEW';
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  padding: 0.125rem 0.375rem;
  background: var(--steel-800, #252525);
  border: 1px solid var(--steel-700, #333);
  border-radius: 2px;
  font-size: 0.5rem;
  font-weight: 600;
  letter-spacing: 0.05em;
  color: var(--steel-500, #666);
  opacity: 0;
  transition: opacity 0.2s ease;
}

/* Interactive document container - renders parsed tokens in NORMAL mode */
.content-pane__interactive-container {
  flex: 1;
  height: 100%;
  overflow: auto;
  padding: 0.75rem;
  padding-right: calc(0.75rem + 100px); /* Make room for minimap */
  background: var(--steel-950, #0d0d0d);
}

.content-pane__interactive {
  /* Token rendering styles are in components/tokens/tokens.css */
  /* This container just provides layout context */
  font-size: 0.9375rem;
  line-height: 1.7;
  color: var(--steel-200, #e0e0e0);
}

/* Interactive document should fill the container */
.content-pane--normal .content-pane__interactive-container {
  display: flex;
  flex-direction: column;
}

/* Insert mode: full editor with line numbers and editing cues */
.content-pane--insert {
  padding: 0;
  position: relative;
  overflow: hidden; /* CodeMirror handles its own scroll */
  /* Subtle green tint to indicate edit mode */
  background: linear-gradient(135deg, rgba(76, 175, 80, 0.02) 0%, transparent 50%);
}

/* Edit mode shows line numbers */
.content-pane--insert .cm-gutters {
  background: var(--steel-900, #1a1a1a);
  border-right: 1px solid var(--steel-800, #252525);
}

/* Insert mode indicator: left border glow */
.content-pane--insert::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: var(--mode-accent, var(--status-insert, #4caf50));
  z-index: 10;
}

/* EDIT badge in insert mode */
.content-pane--insert::after {
  content: 'EDIT';
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  padding: 0.125rem 0.375rem;
  background: var(--status-insert, #4caf50);
  border-radius: 2px;
  font-size: 0.5rem;
  font-weight: 600;
  letter-spacing: 0.05em;
  color: var(--steel-950, #0d0d0d);
  z-index: 10;
}

/* Highlight the caret more prominently in edit mode */
.content-pane--insert .cm-cursor {
  border-left: 2px solid var(--status-insert, #4caf50) !important;
}

/* =============================================================================
   Feedback Message Overlay
   ============================================================================= */

.hypergraph-editor__feedback {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  padding: 0.625rem 1rem;
  background: var(--steel-900, #1a1a1a);
  border: 1px solid var(--steel-700, #333);
  border-radius: 4px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
  z-index: 200;
  font-size: 0.875rem;
  font-weight: 500;
  white-space: nowrap;
  animation: feedback-appear 0.2s ease;
}

@keyframes feedback-appear {
  from {
    opacity: 0;
    transform: translate(-50%, -45%);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%);
  }
}

.hypergraph-editor__feedback--success {
  color: var(--status-insert, #4caf50);
  border-color: var(--status-insert, #4caf50);
  background: rgba(76, 175, 80, 0.1);
}

.hypergraph-editor__feedback--warning {
  color: var(--status-edge, #ff9800);
  border-color: var(--status-edge, #ff9800);
  background: rgba(255, 152, 0, 0.1);
}

.hypergraph-editor__feedback--error {
  color: var(--status-error, #f44336);
  border-color: var(--status-error, #f44336);
  background: rgba(244, 67, 54, 0.1);
}

/* =============================================================================
   Confidence Panel (gc toggle)
   ============================================================================= */

.confidence-panel {
  position: absolute;
  bottom: 2.5rem; /* Above status line */
  right: 1rem;
  width: 16rem;
  background: var(--steel-900, #1a1a1a);
  border: 1px solid var(--steel-700, #333);
  border-radius: 4px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
  z-index: 100;
}

.confidence-panel__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.5rem 0.75rem;
  background: var(--steel-850, #1f1f1f);
  border-bottom: 1px solid var(--steel-700, #333);
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--steel-300, #a0a0a0);
}

.confidence-panel__close {
  background: none;
  border: none;
  color: var(--steel-500, #666);
  font-size: 1rem;
  cursor: pointer;
  padding: 0 0.25rem;
  line-height: 1;
}

.confidence-panel__close:hover {
  color: var(--steel-200, #ccc);
}

.confidence-panel__content {
  padding: 0.5rem 0.75rem;
}

.confidence-panel__row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.25rem 0;
  font-size: 0.75rem;
}

.confidence-panel__label {
  color: var(--steel-500, #666);
}

.confidence-panel__value {
  color: var(--steel-200, #ccc);
  font-weight: 500;
}

.confidence-panel__link {
  background: none;
  border: none;
  color: var(--status-normal, #4a9eff);
  font-family: inherit;
  font-size: inherit;
  cursor: pointer;
  padding: 0;
  text-decoration: underline;
}

.confidence-panel__link:hover {
  color: var(--steel-100, #e0e0e0);
}

.confidence-panel__hint {
  margin-top: 0.5rem;
  padding-top: 0.5rem;
  border-top: 1px solid var(--steel-800, #252525);
  font-size: 0.625rem;
  color: var(--steel-600, #444);
  text-align: center;
}

.confidence-panel__hint kbd {
  display: inline-block;
  padding: 0.125rem 0.25rem;
  background: var(--steel-800, #252525);
  border: 1px solid var(--steel-700, #333);
  border-radius: 2px;
  font-family: inherit;
  font-size: 0.625rem;
  color: var(--steel-400, #888);
}

/* =============================================================================
   Portal Styles (zo/zc — inline edge expansion)
   ============================================================================= */

.portal {
  margin: 0.75rem 0;
  background: var(--steel-900, #1a1a1a);
  border-radius: 4px;
  overflow: hidden;
  border: 1px solid var(--steel-800, #252525);
}

.portal__header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.375rem 0.625rem;
  background: var(--steel-850, #1f1f1f);
  border-bottom: 1px solid var(--steel-800, #252525);
  font-size: 0.75rem;
}

.portal__title {
  font-weight: 600;
  color: var(--steel-200, #ccc);
}

.portal__path {
  color: var(--steel-500, #666);
  font-size: 0.625rem;
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.portal__tier {
  padding: 0.125rem 0.25rem;
  font-size: 0.5rem;
  font-weight: 600;
  text-transform: uppercase;
  border-radius: 2px;
  background: var(--steel-800, #252525);
  color: var(--steel-400, #888);
}

.portal__tier[data-tier='CANONICAL'] {
  background: var(--accent-gold, #ffd700);
  color: var(--steel-900, #1a1a1a);
}

.portal__tier[data-tier='RICH'] {
  background: var(--status-insert, #4caf50);
  color: var(--steel-900, #1a1a1a);
}

.portal__body {
  margin: 0;
  padding: 0.5rem;
  background: var(--steel-950, #0d0d0d);
  color: var(--steel-300, #a0a0a0);
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  font-size: 0.8125rem;
  line-height: 1.5;
  white-space: pre-wrap;
  word-wrap: break-word;
  overflow-x: auto;
  max-height: 20rem;
  overflow-y: auto;
}

.portal__loading {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 1.5rem;
  color: var(--steel-500, #666);
  font-size: 0.75rem;
}

.portal__spinner {
  width: 1rem;
  height: 1rem;
  border: 2px solid var(--steel-700, #333);
  border-top-color: var(--status-normal, #4a9eff);
  border-radius: 50%;
  animation: portal-spin 0.6s linear infinite;
}

@keyframes portal-spin {
  to {
    transform: rotate(360deg);
  }
}

.portal__error {
  padding: 1rem;
  text-align: center;
  color: var(--status-error, #f44336);
  font-size: 0.75rem;
}

/* =============================================================================
   Responsive
   ============================================================================= */

@media (max-width: 768px) {
  .edge-gutter {
    min-width: 2rem;
    padding: 0.25rem;
  }

  .edge-gutter__badge {
    font-size: 0.5rem;
    padding: 0.125rem;
  }

  .hypergraph-header__parent,
  .hypergraph-header__child {
    min-width: auto;
  }

  .hypergraph-header__parent-label,
  .hypergraph-header__child-label {
    display: none;
  }

  .portal__body {
    max-height: 15rem;
    font-size: 0.75rem;
  }
}

/* =============================================================================
   Modal Overlay (for AnalysisQuadrant and other modals without built-in overlay)
   ============================================================================= */

.hypergraph-editor__modal-overlay {
  position: fixed;
  inset: 0;
  z-index: 150;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(4px);
  animation: hypergraph-modal-fade-in 0.15s ease-out;
}

@keyframes hypergraph-modal-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.hypergraph-editor__modal-content {
  max-width: 90%;
  max-height: 90%;
  overflow: auto;
  animation: hypergraph-modal-slide-in 0.2s ease-out;
}

@keyframes hypergraph-modal-slide-in {
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* =============================================================================
   Disappearing Chrome — Phase 2
   "Still by default, alive on interaction"
   ============================================================================= */

/* Toolbar fade — subtle by default, full on hover/focus */
.hypergraph-editor__toolbar {
  opacity: 0.4;
  transition: opacity 0.2s ease;
}

.hypergraph-editor:hover .hypergraph-editor__toolbar,
.hypergraph-editor:focus-within .hypergraph-editor__toolbar {
  opacity: 1;
}

/* Status line compression — smooth transitions for expand/collapse */
.hypergraph-editor__status-line {
  transition: all 0.2s ease;
}

.hypergraph-editor__status-line--compact {
  /* Modifier for compact mode — reduced height and padding */
  padding-block: 0.125rem;
  font-size: 0.625rem;
}

/* Edge gutter subtle mode — fade when not actively used */
.hypergraph-editor__edge-gutter,
.edge-gutter {
  opacity: 0.5;
  transition: opacity 0.2s ease;
}

.hypergraph-editor__edge-gutter:hover,
.edge-gutter:hover,
.hypergraph-editor__main:focus-within .hypergraph-editor__edge-gutter,
.hypergraph-editor__main:focus-within .edge-gutter {
  opacity: 1;
}
