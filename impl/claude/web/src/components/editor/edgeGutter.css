/**
 * Edge Gutter Styling
 *
 * STARK BIOME themed edge markers in the CodeMirror gutter.
 * Shows edges at specific line numbers with confidence-based coloring.
 *
 * Color scheme:
 * - High confidence (>=80%): Green border
 * - Medium confidence (50-79%): Amber border
 * - Low confidence (<50%): Red border
 * - Unknown confidence: Steel border
 */

/* =============================================================================
 * Gutter Container
 * ============================================================================= */

.cm-edge-gutter {
  width: 24px;
  min-width: 24px;
  padding: 0 2px;
  background: transparent;
}

.edge-line-gutter {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1px;
  height: 100%;
}

.edge-line-gutter--spacer {
  visibility: hidden;
}

/* =============================================================================
 * Edge Markers
 * ============================================================================= */

.edge-line-marker {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 14px;
  height: 14px;
  font-size: 10px;
  line-height: 1;
  border-radius: 2px;
  border: 1px solid;
  transition: transform 150ms ease, opacity 150ms ease;
  user-select: none;
}

/* Hover state */
.edge-line-marker:hover {
  transform: scale(1.15);
  z-index: 10;
}

/* Cursor for clickable markers */
.edge-line-marker[style*="cursor: pointer"]:hover {
  filter: brightness(1.1);
}

/* =============================================================================
 * Direction Variants
 * ============================================================================= */

/* Incoming edges (target is current node) - left arrow */
.edge-line-marker--incoming {
  color: #94a3b8; /* slate-400 */
}

/* Outgoing edges (source is current node) - right arrow */
.edge-line-marker--outgoing {
  color: #94a3b8; /* slate-400 */
}

/* =============================================================================
 * Confidence Level Styling
 * ============================================================================= */

/* High confidence (>=80%) - Green */
.edge-line-marker--high {
  border-color: #22c55e; /* green-500 */
  background: rgba(34, 197, 94, 0.1);
  color: #22c55e;
}

.edge-line-marker--high:hover {
  background: rgba(34, 197, 94, 0.2);
}

/* Medium confidence (50-79%) - Amber */
.edge-line-marker--medium {
  border-color: #f59e0b; /* amber-500 */
  background: rgba(245, 158, 11, 0.1);
  color: #f59e0b;
}

.edge-line-marker--medium:hover {
  background: rgba(245, 158, 11, 0.2);
}

/* Low confidence (<50%) - Red */
.edge-line-marker--low {
  border-color: #ef4444; /* red-500 */
  background: rgba(239, 68, 68, 0.1);
  color: #ef4444;
}

.edge-line-marker--low:hover {
  background: rgba(239, 68, 68, 0.2);
}

/* Unknown confidence - Steel */
.edge-line-marker--unknown {
  border-color: #5a5a64; /* steel-400 */
  background: rgba(90, 90, 100, 0.1);
  color: #5a5a64;
}

.edge-line-marker--unknown:hover {
  background: rgba(90, 90, 100, 0.2);
}

/* =============================================================================
 * Edge Type Special Styling
 * ============================================================================= */

/* Contradicts - always red, pulsing */
.edge-line-marker--contradicts {
  border-color: #ef4444 !important;
  color: #ef4444 !important;
  animation: edge-pulse 2s ease-in-out infinite;
}

@keyframes edge-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

/* Derives_from - special derivation style */
.edge-line-marker--derives_from {
  font-weight: 600;
}

/* Tests - subtle test indicator */
.edge-line-marker--tests {
  border-style: dashed;
}

/* =============================================================================
 * Stale Edge Styling
 * ============================================================================= */

.edge-line-marker--stale {
  opacity: 0.5;
  border-style: dotted;
}

.edge-line-marker--stale:hover {
  opacity: 0.8;
}

/* =============================================================================
 * Dark Mode / Editor Focus States
 * ============================================================================= */

/* Dim when editor not focused */
.cm-editor:not(.cm-focused) .edge-line-marker {
  opacity: 0.6;
}

/* Readonly mode - slightly more muted */
.markdown-editor--readonly .edge-line-marker {
  opacity: 0.8;
}

/* =============================================================================
 * Tooltip Styling (via title attribute)
 * Note: Native tooltips; custom tooltip component can be added later
 * ============================================================================= */

.edge-line-marker[title] {
  cursor: help;
}

.edge-line-marker[style*="cursor: pointer"][title] {
  cursor: pointer;
}

/* =============================================================================
 * Animation on appearance
 * ============================================================================= */

@keyframes edge-marker-appear {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.cm-edge-gutter .edge-line-marker {
  animation: edge-marker-appear 150ms ease-out;
}
