/**
 * ConstitutionalNode Styles
 *
 * STARK BIOME: Brutalist, functional, earned glow
 * "The frame is humble. The content glows."
 */

/* =============================================================================
 * CSS Variables
 * ============================================================================= */

:root {
  --cgn-bg: #1a1a1a;
  --cgn-bg-hover: #252525;
  --cgn-border: #333;
  --cgn-text: #e0e0e0;
  --cgn-text-muted: #888;
  --cgn-loss-bg: #252525;
}

/* =============================================================================
 * Base Node
 * ============================================================================= */

.cgn {
  cursor: pointer;
  transition:
    transform 0.1s ease,
    filter 0.1s ease;
  outline: none;
}

.cgn:hover {
  transform: translateY(-1px);
}

.cgn:focus {
  outline: none;
}

.cgn:focus-visible .cgn__bg {
  stroke: var(--color-accent, #6b8b6b);
  stroke-width: 2;
}

/* =============================================================================
 * Background
 * ============================================================================= */

.cgn__bg {
  transition:
    fill 0.15s ease,
    stroke 0.15s ease,
    stroke-width 0.15s ease;
}

.cgn:hover .cgn__bg {
  fill: var(--cgn-bg-hover);
}

/* =============================================================================
 * Layer Indicator
 * ============================================================================= */

.cgn__layer-indicator {
  opacity: 0.9;
}

.cgn--highlighted .cgn__layer-indicator {
  opacity: 1;
}

/* =============================================================================
 * Name Text
 * ============================================================================= */

.cgn__name {
  font-family: var(--font-mono, 'IBM Plex Mono', monospace);
  font-weight: 500;
  pointer-events: none;
  user-select: none;
}

.cgn--selected .cgn__name {
  font-weight: 600;
}

/* =============================================================================
 * Loss Badge
 * ============================================================================= */

.cgn__loss-bg {
  transition: fill 0.1s ease;
}

.cgn:hover .cgn__loss-bg {
  fill: #333;
}

.cgn__loss-text {
  pointer-events: none;
  user-select: none;
}

/* =============================================================================
 * Evidence Tier Dot
 * ============================================================================= */

.cgn__tier-dot {
  transition: r 0.1s ease;
}

.cgn:hover .cgn__tier-dot {
  r: 4;
}

.cgn--selected .cgn__tier-dot {
  r: 4;
  stroke: white;
  stroke-width: 1;
}

/* =============================================================================
 * State Variants
 * ============================================================================= */

/* Selected state */
.cgn--selected {
  filter: drop-shadow(0 2px 8px rgba(107, 139, 107, 0.4));
}

.cgn--selected .cgn__bg {
  stroke-width: 2;
}

/* Highlighted state (part of derivation path) */
.cgn--highlighted:not(.cgn--selected) .cgn__bg {
  fill: rgba(107, 139, 107, 0.1);
}

/* Orphan state (warning) */
.cgn--orphan .cgn__bg {
  stroke: #ef4444 !important;
  stroke-dasharray: 4 2;
}

.cgn--orphan:hover .cgn__bg {
  fill: rgba(239, 68, 68, 0.1);
}

.cgn__orphan-warning {
  font-weight: bold;
  pointer-events: none;
}

/* =============================================================================
 * Layer-specific Variants
 * ============================================================================= */

/* L0 Axioms - Purple tint */
.cgn--layer-0 .cgn__bg {
  background: linear-gradient(90deg, rgba(139, 92, 246, 0.1) 0%, transparent 100%);
}

/* L1 Primitives - Blue tint */
.cgn--layer-1 .cgn__bg {
  background: linear-gradient(90deg, rgba(59, 130, 246, 0.1) 0%, transparent 100%);
}

/* L2 Principles - Green tint */
.cgn--layer-2 .cgn__bg {
  background: linear-gradient(90deg, rgba(16, 185, 129, 0.1) 0%, transparent 100%);
}

/* L3 Architecture - Yellow tint */
.cgn--layer-3 .cgn__bg {
  background: linear-gradient(90deg, rgba(245, 158, 11, 0.1) 0%, transparent 100%);
}

/* =============================================================================
 * Evidence Tier Colors (applied via inline styles, documented here)
 * ============================================================================= */

/*
 * categorical: #22c55e (Green - high confidence)
 * empirical: #3b82f6 (Blue - evidence-based)
 * aesthetic: #a855f7 (Purple - taste-based)
 * somatic: #f59e0b (Yellow - intuitive)
 * chaotic: #ef4444 (Red - unreliable)
 */

/* =============================================================================
 * Responsive Adjustments
 * ============================================================================= */

@media (max-width: 600px) {
  .cgn__name {
    font-size: 9px !important;
  }

  .cgn__loss-text {
    font-size: 7px !important;
  }
}

/* =============================================================================
 * Reduced Motion
 * ============================================================================= */

@media (prefers-reduced-motion: reduce) {
  .cgn {
    transition: none;
  }

  .cgn__bg,
  .cgn__loss-bg,
  .cgn__tier-dot {
    transition: none;
  }
}

/* =============================================================================
 * Print Styles
 * ============================================================================= */

@media print {
  .cgn__bg {
    fill: white !important;
    stroke: #333 !important;
  }

  .cgn__name {
    fill: #333 !important;
  }

  .cgn--selected {
    filter: none;
  }
}
