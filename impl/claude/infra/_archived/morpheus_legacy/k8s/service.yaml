# Morpheus Gateway Service
#
# Exposes the Morpheus Gateway within the cluster at:
#   http://morpheus-gateway.kgents.svc.cluster.local:8080
#
# Applications can use standard OpenAI SDK with base_url override:
#   client = openai.Client(base_url="http://morpheus-gateway:8080/v1")
#
# AGENTESE: world.morpheus.service.manifest
---
apiVersion: v1
kind: Service
metadata:
  name: morpheus-gateway
  namespace: kgents
  labels:
    app.kubernetes.io/name: morpheus-gateway
    app.kubernetes.io/part-of: kgents
    app.kubernetes.io/component: llm-gateway
spec:
  type: ClusterIP
  selector:
    app.kubernetes.io/name: morpheus-gateway
  ports:
    - name: http
      port: 8080
      targetPort: http
      protocol: TCP
    - name: metrics
      port: 9090
      targetPort: metrics
      protocol: TCP
---
# Optional: NodePort service for local development with Kind
apiVersion: v1
kind: Service
metadata:
  name: morpheus-gateway-nodeport
  namespace: kgents
  labels:
    app.kubernetes.io/name: morpheus-gateway-nodeport
    app.kubernetes.io/part-of: kgents
    app.kubernetes.io/component: llm-gateway
spec:
  type: NodePort
  selector:
    app.kubernetes.io/name: morpheus-gateway
  ports:
    - name: http
      port: 8080
      targetPort: http
      nodePort: 30808
      protocol: TCP
